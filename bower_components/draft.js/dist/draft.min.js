/* draft.js v0.2.0 | http://draft.js.org | license MIT */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.draft=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function u(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:u(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function f(t){return f.doc(t)};return a.types={},a.mixins={},a.transforms={},a.createTransform=function(t){var e=i({},t,Object.defineProperty(function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return this.transform.apply(this,[t].concat(n))},"name",{configurable:!0,value:t}));return e[t]},a.inherit=function(t,e,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t},a.mixin=function(t,e){if(Array.isArray(e)){var n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var f=s.value;a.mixin(t,f)}}catch(c){i=!0,o=c}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}}else if("string"==typeof e)a.mixin(t,a.mixins[e]);else if("object"==("undefined"==typeof e?"undefined":r(e)))for(var l in e)e.hasOwnProperty(l)&&(t.prototype[l]=e[l])},a.proxy=function(t){return t},a.defaults=a.proxy({get dpi(){var t=document.createElement("div");t.style.width="1in",t.style.padding=0,document.getElementsByTagName("body")[0].appendChild(t);var e=t.offsetWidth;return document.getElementsByTagName("body")[0].removeChild(t),e||96}}),a.types.Float=function(){function t(e){n(this,t),this.value=parseFloat(e)}return s(t,[{key:"valueOf",value:function(){return this.value}},{key:"type",get:function(){return"float"}},{key:"regex",get:function(){return"[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?"}}]),t}(),a.types["float"]=function(t){return void 0==t?t:new a.types.Float(t)},a.defaults.unit="px",a.types.Length=function(r){function i(e,r){n(this,i);var o=t(this,Object.getPrototypeOf(i).call(this,e));return e=o.test(e),r=o.test(r),isNaN(o.value)||!e&&!r?o.unit=a.defaults.unit:(o.unit=e||r,o.convert(r)),o}return e(i,r),s(i,[{key:"test",value:function(t){return t=new RegExp(this.regex+"$","i").exec(t),t?t[0].toLowerCase():!1}},{key:"convert",value:function(t){var e=this;if(t=this.test(t),!t)return!1;for(var n=function(t,n){var r=e.units[t];return e.value*=n?r[1]:r[0],e.value/=n?r[0]:r[1],r[2]},r=this.unit;r!==t&&"px"!==r;)r=n(r);if(r!==t)for(r=t;"px"!==r;)r=n(r,!0);return this.unit=t,this.toString()}},{key:"valueOf",value:function(){return new i(this.toString(),a.defaults.unit).value}},{key:"toString",value:function(){return this.value+this.unit}},{key:"type",get:function(){return"length"}},{key:"regex",get:function(){return"(px|pt|pc|in|ft|yd|mi|mm|cm|dm|km|m)"}},{key:"units",get:function(){return{px:[1,1,"px"],pt:[1,72,"px"],pc:[12,1,"pt"],"in":[a.defaults.dpi,1,"px"],ft:[12,1,"in"],yd:[3,1,"ft"],mi:[1760,1,"yd"],mm:[1,25.4,"in"],cm:[10,1,"mm"],dm:[10,1,"cm"],m:[10,1,"dm"],km:[1e3,1,"m"]}}}]),i}(a.types.Float),a.types.length=function(t,e){return void 0==t?t:new a.types.Length(t,e)},a.types.Color=function(){function t(e){if(n(this,t),e=new RegExp("^(?:"+this.regex+")$","i").exec(isNaN(e)?e:e.toString(16)),null!==e){this.color=e[0].toLowerCase();for(var r=1;3>=r;r++)e[r]=parseInt(e[r]||parseInt(e[r+3]||e[r+6].repeat(2),16),10);this.red=e[1],this.green=e[2],this.blue=e[3]}}return s(t,[{key:"valueOf",value:function(){return this.red<<16|this.green<<8|this.blue}},{key:"toString",value:function(){return this.color}},{key:"type",get:function(){return"color"}},{key:"regex",get:function(){var t="([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5])",e="rgb\\("+t+", ?"+t+", ?"+t+"\\)",n="([0-9a-f]{2})".repeat(3),r="#?(?:"+n+"|"+n.replace(/\{2\}/g,"")+")";return e+"|"+r}}]),t}(),a.types.color=function(t){return void 0==t?t:new a.types.Color(t)},a.mixins.event={on:function(t,e){var n=this.getListeners(t,!0);for(var i in n){var o=n[i];-1===o.map(function(t){return t.listener}).indexOf(e)&&o.push("object"==("undefined"==typeof e?"undefined":r(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r],o=i.map(function(t){return t.listener}).lastIndexOf(e);-1!==o&&i.splice(o,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var n=this.getListeners(t,!0);for(var r in n)for(var i=n[r],o=i.length;o--;){var s=i[o],a=s.listener.apply({target:this,timeStamp:Date(),type:r},e);(s.once===!0||"off"===a)&&this.off(t,s.listener)}return this},defineEvent:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value;this.getListeners(u)}}catch(f){i=!0,o=f}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var n in e)t.test(n)&&delete e[n];else delete this._events;return this},getListeners:function(t,e){var n=this._getEvents(),r={};if(t instanceof RegExp)for(var i in n)t.test(i)&&(r[i]=n[i]);else{var o=n[t]||(n[t]=[]);void 0===e?r=o:r[t]=o}return r},_getEvents:function(){return this._events||(this._events={})}},a.mixins.transform={transform:function(t){var e={transform:t,args:{}};t=a.transforms[t];for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];for(var o in r){var s=t.args[o];if(e.args[s]=r[o],-1!==this.map.indexOf(s)){var u=t.transform.call(this,s,r[o]);this.prop(s,u)}}return this.transforms.push(e),this.fire("transform:"+e.transform,e),this}},a.transforms.translate={args:["x","y","z"],transform:function(t,e){return e=a.types.length(e||0),a.types.length((this.prop(t)||0)+e,this.unit())}},a.transforms.position={args:a.transforms.translate.args,transform:function(t,e){return a.types.length(e||0,this.unit())}},a.mixins.translate={translate:a.createTransform("translate"),position:a.createTransform("position")},a.transforms.rotate={args:["alpha","beta","gamma","order"],transform:function(t,e){return e=a.types.angle(e||0),a.types.angle((this.prop(t)||0)+e,this.defaults.angle)}},a.transforms.orientation={args:a.transforms.rotate.args,transform:function(t,e,n){return a.types.angle(n||0,this.defaults.angle)}},a.mixins.rotate={rotate:a.createTransform("rotate"),orientation:a.createTransform("orientation")},a.transforms.scale={args:["width","height","length"],transform:function(t,e){return e=parseFloat(e)||1,a.types.length((this.prop(t)||0)*e,this.unit())}},a.transforms.size={args:a.transforms.scale.args,transform:function(t,e){return a.types.length(e||0,this.unit())}},a.mixins.scale={scale:a.createTransform("scale"),size:a.createTransform("size")},a.transforms.skew={args:["skewX","skewY","skewZ"],transform:function(t,e){return parseFloat(e)||0}},a.mixins.skew={skew:a.createTransform("skew")},a.mixins.system={system:function(t){return this.prop("system",t)}},a.defaults.system="cartesian",a.mixins.fill={fill:function(t){return this.fillColor(t)},fillColor:function(t){return this.prop("fill.color",a.types.color(t))},fillOpacity:function(t){return/^(0(\.\d*)?|1(\.0*)?)$/.test(t)&&(t=parseFloat(t,10)),this.prop("fill.opacity",t)}},a.defaults["fill.color"]="#fff",a.defaults["fill.opacity"]=0,a.mixins.stroke={stroke:function(t){return this.strokeColor(t)},strokeColor:function(t){return this.prop("stroke.color",a.types.color(t))},strokeOpacity:function(t){return/^(0(\.\d*)?|1(\.0*)?)$/.test(t)&&(t=parseFloat(t,10)),this.prop("stroke.opacity",t)},strokeWidth:function(t){return this.prop("stroke.width",a.types.length(t))}},a.defaults["stroke.color"]="#000",a.defaults["stroke.opacity"]=1,a.defaults["stroke.width"]=1,a.Element=function(){function o(t){n(this,o),this._metadata={name:t},this._properties={},this.transforms=[];for(var e in a)if(this.constructor===a[e]){this._type=e.toLowerCase();break}this._type||(this._type=this.constructor.name)}return s(o,[{key:"prop",value:function(t,e){if(void 0===t)return this._properties;if(null===t)this._properties={};else if("string"==typeof t){var n=a.proxy(this._properties);if(void 0===e)return t in n?n[t]:null;null===e?(delete n[t],this.fire("change",[t,e])):n[t]!==e&&("color"===e.type&&(e=String(e)),n[t]=e,this.fire("change",[t,e]))}else if("object"==("undefined"==typeof t?"undefined":r(t))){var i=!1;for(var o in t)t[o]=this.prop(o,t[o]),i=i||"object"==r(t[o]);return i?this:t}return this}},{key:"unit",value:function(t){return this.prop("unit",t)}},{key:"stringify",value:function(t){var e;return Array.isArray(t)?e=function(e,n){return-1===t.indexOf(e)?n:void 0}:t instanceof RegExp&&(e=function(e,n){return t.test(e)?void 0:n}),JSON.stringify(this,e,2)}},{key:"toJSON",value:function(){return{type:this.type,id:this.id,properties:this.prop(),children:this.children}}},{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"domID",get:function(){var t=String(this.id);return this.type+"_"+"0".repeat(Math.max(4-t.length,0))+t}},{key:"meta",get:function(){return this._metadata}}],[{key:"extend",value:function(r,o,u){var f=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).call(this))}return e(i,r),s(i,[{key:"foo",value:function(){return"foo"}},{key:"getter",get:function(){return"get"}}]),i}(this);Object.defineProperty(f,"name",{configurable:!0,value:r});var c=function l(t,e){for(var n in e)if("static"===n)l(t.constructor,e["static"]);else if("construct"!==n){var r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t,n,r)}};return c(f.prototype,o),null!==u&&(u||a.Group).mixin(i({},r.toLowerCase(),function(){var t=this.append(new f);if("construct"in o){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];(e=o.construct).call.apply(e,[t].concat(r))}return t})),f}},{key:"mixin",value:function(t){a.mixin(this,t)}}]),o}(),a.Element.mixin(["event","transform"]),a.Group=function(r){function i(e){n(this,i);var r=t(this,Object.getPrototypeOf(i).call(this,e));return r.children=[],r}return e(i,r),s(i,[{key:"child",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;if(s.meta.name===t)return s}}catch(a){n=!0,r=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},{key:"add",value:function(t){t.parent=this,t.doc=this.doc||this;var e=t.type;return(t.doc.elements[e]||(t.doc.elements[e]=[])).push(t),t._id=t.doc.elements[e].length,t.unit(this.unit()),"group"===e&&t.system(this.system()),this.children.push(t),this.fire("add",t),this}},{key:"append",value:function(t){return this.add(t),t}},{key:"remove",value:function(t){return this.fire("remove",t),this}},{key:"map",get:function(){return["x","y","z","alpha"]}},{key:"firstChild",get:function(){return this.children[0]}},{key:"lastChild",get:function(){return this.children[this.children.length-1]}}]),i}(a.Element),a.Group.mixin(["system","translate","rotate"]),a.Group.mixin({group:function(t){return this.append(new a.Group(t))}}),a.Doc=function(r){function i(e){n(this,i);var r=t(this,Object.getPrototypeOf(i).call(this,e));return r.elements={},r.prop({system:a.defaults.system,unit:a.defaults.unit}),r}return e(i,r),i}(a.Group),a.doc=function(t){var e=new a.Doc(t);return(a.docs||(a.docs=[])).push(e),e._id=a.docs.length,e},a.View=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),s(i,[{key:"map",get:function(){return["x","y","z","alpha","width","height"]}},{key:"aspectRatio",get:function(){var t=a.types.length(this.prop("width")).value,e=a.types.length(this.prop("height")).value,n=function r(t,e){return e?r(e,t%e):t};return n=n(t,e),t/n+":"+e/n}}]),i}(a.Element),a.View.mixin(["translate","rotate","scale"]),a.Group.mixin({view:function(t){return this.append(new a.View(t)).size(100,100)}}),a.Point=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),s(i,[{key:"map",get:function(){return["x","y","z","stroke"]}}]),i}(a.Element),a.Point.mixin(["translate","stroke"]),a.Group.mixin({point:function(t){return this.append(new a.Point(t))}}),a.Line=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),s(i,[{key:"map",get:function(){var t;return(t=o(Object.getPrototypeOf(i.prototype),"map",this)).concat.apply(t,["alpha","width"])}}]),i}(a.Point),a.Line.mixin(["rotate","scale"]),a.Group.mixin({line:function(t){return this.append(new a.Line(t)).size(100)}}),a.Shape=a.Line.extend("Shape",{get map(){return["x","y","z","alpha","width","height","skewX","skewY","fill","stroke"]}}),a.Shape.mixin(["skew","fill"]),a.Rectangle=a.Shape.extend("Rectangle",{construct:function(t,e){this.size(t||75,e||100)},get rekt(){return Math.floor(101*Math.random())+"% rekt"}}),a.Group.mixin({rect:function(){return this.rectangle.apply(this,arguments)}}),a.Square=a.Rectangle.extend("Square",{construct:function(t){this.size(t||100)},get map(){return["x","y","z","alpha","width","skewX","skewY","fill","stroke"]}}),a.Ellipse=a.Shape.extend("Ellipse",{construct:function(t,e){this.size(t||75,e||100)}}),a.Circle=a.Ellipse.extend("Circle",{construct:function(t){this.size(t||100)},get map(){return["x","y","z","alpha","width","skewX","skewY","fill","stroke"]},radius:function(t){return this.size(2*t,2*t)}}),a});
//# sourceMappingURL=draft.min.js.map
